{% extends 'base.html' %}

{% block title %}
Upload Artwork
{% endblock %}

{% block specificcss %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/author.css') }}">
{% endblock %}

{% block main %}
<main>
    <div class="hero_single inner_pages author_page jarallax" data-jarallax>
        {% if g.user and g.user.cover_photo_url %}
        <img class="jarallax-img" src="{{ g.user.cover_photo_url }}" alt="User Cover Photo">
        {% else %}
        <img class="jarallax-img" src="{{ url_for('static', filename='img/hero_general.jpg') }}"
            alt="Default Cover Photo">
        {% endif %}
        <div class="opacity-mask" data-opacity-mask="rgba(0, 0, 0, 0.4)">
        </div>
        <div class="wave hero"></div>
    </div>
    <!-- /hero_single -->

    <div class="container margin_30_40">
        <div class="row">
            <div class="col-lg-3">
                <div class="main_profile edit_section">
                    <div class="author">
                        <div class="author_thumb veryfied">
                            <i class="bi bi-check"></i>
                            <figure>
                                <img src="{{ url_for('static', filename='img/avatar-placeholder.png') }}"
                                    data-src="{{ g.user.profile_photo_url or url_for('static', filename='img/avatar-placeholder.png') }}"
                                    alt="Profile Photo" class="lazy" width="100" height="100">
                            </figure>
                        </div>
                    </div>
                    <h1>@{{ g.user.username }}</h1>
                    <ul>
                        <li><a href="{{ url_for('profile.edit') }}"><i class="bi bi-person"></i>Edit profile</a></li>
                        <li><a href="{{ url_for('profile.upload') }}" class="active"><i
                                    class="bi bi-file-earmark-arrow-up"></i>Upload Artwork</a></li>
                        <li><a href="{{ url_for('profile.settings') }}"><i class="bi bi-gear"></i>Account settings</a>
                        </li>
                        <li><a href="{{ url_for('auth.logout') }}"><i class="bi bi-box-arrow-right"></i>Log out</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-9 ps-lg-5">
                <div class="main_title version_2">
                    <span><em></em></span>
                    <h2>Upload Artwork</h2>
                </div>

                <div class="row">
                    <div class="col-md-9">
                        <div class="form-group">
                            <label>Upload file</label>
                            <div class="file_upload">
                                <input type="file" id="artwork-upload" accept="image/*,video/mp4,audio/mp3">
                                <i class="bi bi-file-earmark-arrow-up"></i>
                                <div>PNG, GIF, JPG, WEBP, MP4 or MP3. Max 50MB</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Preview</label>
                            <figure id="preview-container">
                                <img id="preview-image" src="{{ url_for('static', filename='img/items/item-3.jpg') }}"
                                    alt="" width="533" height="400" class="img-fluid rounded">
                                <video id="preview-video" class="img-fluid rounded" controls
                                    style="display: none;"></video>
                                <audio id="preview-audio" controls style="display: none; width: 100%;"></audio>
                            </figure>
                        </div>
                    </div>
                </div>
                <!-- /row -->

                <div class="row">
                    <div class="col-md-8">
                        <div class="form-group">
                            <label>Item title</label>
                            <input type="text" class="form-control" placeholder="e.g. Abstract modern art">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label>Price</label>
                            <input type="text" class="form-control" placeholder="e.g. Abstract modern art">
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="form-group">
                            <label>Description</label>
                            <input type="text" class="form-control" placeholder="e.g. Abstract modern art">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label>Royalties</label>
                            <input type="text" class="form-control" placeholder="e.g. Abstract modern art">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label>Size</label>
                            <input type="text" class="form-control" placeholder="e.g. 1000x800">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label>Choose a collection</label>
                            <div class="custom_select">
                                <select class="wide">
                                    <option>Abstract</option>
                                    <option>Pop Art</option>
                                    <option>Photography</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /row -->

                <hr class="mt-3 mb-5">

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group switch_wrapper">
                            <label>Put on sale</label>
                            <p class="mb-0">Ea quo utroque forensibus eloquentiam</p>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" role="switch" checked="checked">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group switch_wrapper">
                            <label>Unlock one purchase</label>
                            <p class="mb-0">Ea quo utroque forensibus eloquentiam</p>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" role="switch">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /row -->

                <p class="text-end mt-4"><a href="#0" class="btn_1">Save changes</a></p>

            </div>
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</main>
<!-- /main -->

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const fileInput = document.getElementById('artwork-upload');
        const previewImage = document.getElementById('preview-image');
        const previewVideo = document.getElementById('preview-video');
        const previewAudio = document.getElementById('preview-audio');

        fileInput.addEventListener('change', function (event) {
            const file = event.target.files[0];
            if (file) {
                const fileType = file.type.split('/')[0]; // 'image', 'video', or 'audio'
                const fileURL = URL.createObjectURL(file);

                // Hide all preview elements
                previewImage.style.display = 'none';
                previewVideo.style.display = 'none';
                previewAudio.style.display = 'none';

                switch (fileType) {
                    case 'image':
                        previewImage.src = fileURL;
                        previewImage.style.display = 'block';
                        break;
                    case 'video':
                        previewVideo.src = fileURL;
                        previewVideo.style.display = 'block';
                        break;
                    case 'audio':
                        previewAudio.src = fileURL;
                        previewAudio.style.display = 'block';
                        break;
                    default:
                        console.log('Unsupported file type');
                }
            }
        });
    });
</script>
{% endblock %}